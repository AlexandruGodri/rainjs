<!DOCTYPE html>
<html>
<head>
	<title>Rain</title>

	<!-- all link and script are removed and replaced by calls to the resource service -->
	<link rel="stylesheet" href="application.css"/>
	<script data-main="main" src="require-jquery.js"></script>
	<script src="jquery-ui/js/jquery-ui-1.8.14.custom.min.js"></script>
	<link rel="stylesheet" href="jquery-ui/css/smoothness/jquery-ui-1.8.14.custom.css"/>
	<script src="js/socket.io/socket.io.js"></script>

	<!-- next style block must stay intact after rendering -->
	<style>
		body, html { margin:0px; padding:0px; }
	</style>
</head>
<body>
	<toolbar>
		<!--<button>Home</button>-->
		<tx:text key="wetter"/>
	</toolbar>
	<dock>
	</dock>
	<container>
		<app type="weather" id="weather1" instanceid="weather1">
			<header></header>
			<content>

			</content>
		</app>
		<app type="email">
		</app>
		<app type="weather"  instanceid="weather3">
		<content></content>
		</app>
		
		<app type="app2">
		</app>
		<app type="app1">
			<domains xmlns="http://juxtapos.de/rain">
			<content></content>
			
			</domains>
		</app>
		<app type="weather" id="weather2"  instanceid="weather2">
			<header>Wetter</header>
			<content>

			</content>
		</app>
		<app id="app3">
		</app>
		<br clear="all"/>
	</container>

</body>
<script>
	$(document).ready(function () {
		//rain();
		$('app').resizable();
		$('container').sortable();	
		
		makeItRain();	
	});

	function makeItRain() {
		var socket = io.connect('http://localhost', 7331);
		socket.on('connect', function () {
			console.log('connected');
			socket.emit('rain.application.state', 'application', 'running');
		});

		socket.on('rain.application.reload', function (val) {
			console.log('reloading on server request');
			setTimeout(function() {
				window.location.reload();
			}, 400);
		});
	}
	</script>
</html>